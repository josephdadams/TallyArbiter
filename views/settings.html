<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="lib/css/bootstrap.min.css">
  <link rel="stylesheet" href="lib/css/custom.css">
  <title>Tally Arbiter</title>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="/"><img src="lib/img/logo_white.png" height="30" alt="" loading="lazy"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item"> <a class="nav-link" href="/">Home</a> </li>
          <li class="nav-item"> <a class="nav-link" href="/tally">Tally View</a> </li>
          <li class="nav-item"> <a class="nav-link" href="/producer">Producer</a> </li>
          <li class="nav-item"> <a class="nav-link active" href="/settings">Settings</a> </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container-fluid">
  <div id='version'></div>
  <div id='container'>
    <div id='divContainer_GettingStarted'>
      <div id='divGettingStarted_Close'>
        <button id='btnGettingStarted_Close' onClick='GettingStarted_Close();'>X</button>
      </div> <span class='title'>Getting Started</span>
      <br />
      <br /> Tally Arbiter is designed to receive or obtain tally data from multiple sources and then arbitrate whether a given device is considered to be in Preview or Program.
      <br />
      <br /> <b>Sources</b> represent all of the tally data that is generated. This is usually your video switcher or mixing software. Multiple sources can be added and they can all be different types. The following source types are currently supported:
      <ul>
        <li>TSL 3.1 UDP/TCP (Ross switchers, etc.)</li>
        <li>Blackmagic ATEM</li>
        <li>OBS Studio</li>
        <li>StudioCoast VMix</li>
        <li>Roland Smart Tally</li>
        <li>Newtek Tricaster</li>
        <li>Open Sound Control (OSC)</li>
      </ul> When you add a source and the connection to the tally source (video switcher, software, etc.) is successfully made, the source will be green. If there is an error, the source will be red. Look at the logs for more error information.
      <br />
      <br /> <b>Devices</b> represent your inputs (like cameras) that you want to track with tally data. Devices can be assigned different addresses or inputs by each source. In Tally Arbiter, you can create as many devices as you would like and give each one a helpful name and description.
      <br />
      <br /> <b>Mapping Source data to Devices:</b>
      <br /> In order to assciate tally data with a device, you must assign the source addresses to each device. These addresses can vary from source to source, so they must be manually assigned.
      <br />
      <br /> For example, a Camera can be connected to a `Blackmagic ATEM` on `Input 1`, but connected to an `OBS Studio` on `Scene 2`. Tally Arbiter will track the tally data from each source and arbitrate whether the device is ultimately in preview or program (or both) by aggregating all of the source data together.
      <br />
      <br /> To assign a Source to a Device, click "Device Sources" next to a Device in the list. Choose the enabled Source from the drop down list, and click "Add".
      <br />
      <br /> <i>A Note About Addresses</i>: The source address is typically the actual input number on the switcher. So, if your camera on your ATEM comes in on Input 5, just enter `5`. However, if you're using a source like OBS Studio, your address might be a string, like `Scene 2`.
      <br />
      <br /> <b>Running Actions when Devices reach a certain tally state:</b>
      <br /> Once a device is assigned to a source(s), if a matching condition is met, an action can be performed. You can specify whether the action should be run when the device is entering a bus or leaving a bus, which is helpful for bus-specific actions like operating a relay. Multiple actions are supported per device and per bus (preview and program).
      <ul>
        <li>TSL 3.1 UDP or TCP</li>
        <li>Outgoing Webhook</li>
        <li>Local Console Output/Logging</li>
        <li>Open Sound Control (OSC)</li>
      </ul> Device Actions can only be run once when the device state enters or exits that bus. This is to prevent actions from being run continuously if tally data is received in chunks. To run an action again, a device must change state on that specific bus (Preview or Program) before it can be run again.
      <br />
      <br /> <b>Configuring and Using Tally Arbiter Cloud</b>
      <br /> Tally Arbiter can send source, device, and tally data from a local instance within a closed network to an instance of Tally Arbiter on another network that may be more acccessible for end users. This is helpful if your users need to access Tally Arbiter and you don't want to have them tunnel or connect into your private network, or if users are located remotely.
      <ul>
        <li>On the cloud server, create a new Cloud Key. This is like a password.</li>
        <li>On the local server, create a new Cloud Destination specifying the host, port, and cloud key. Multiple local servers can utilize the same cloud key.</li>
        <li>Once a connection is established, all sources, devices, and tally data from the local server will be relayed up to the cloud server.</li>
        <li>Tally Arbiter will handle this incoming tally data as it would any local source.</li>
        <li>You can also flash/ping listener clients the same way you would if they were local.</li>
        <li><b>If a Tally Arbiter Client is removed, all Sources and Devices will be removed.</b></li>
      </ul>
    </div>
    <div id='divContainer_Sources'> <span class='title'>Sources</span>
      <div id='divSources'></div>
      <br />
      <br />
      <button id='btnAdd_Source' onclick='Add_Source();'>Add</button>
    </div>
    <div id='divContainer_SourceFields'> <span class='title'>Source</span>
      <select id='selSourceType' style='display:block;'></select>
      <br />
      <div id='divSourceFields'></div>
      <br />
      <button id='btnAdd_Source_Save' onclick='Add_Source_Save();'>Save</button>
      <button id='btnEdit_Source_Save' onclick='Edit_Source_Save();'>Save</button>
      <button id='btnSource_Cancel' onclick='Cancel_Source();'>Cancel</button>
    </div>
    <div id='divContainer_Devices'> <span class='title'>Devices</span>
      <div id='divDevices'></div>
      <br />
      <br />
      <button id='btnAdd_Device' onclick='Add_Device();'>Add</button>
    </div>
    <div id='divContainer_DeviceFields'> <span class='title'>Device</span>
      <div id='divDeviceFields'></div>
      <br />
      <button id='btnAdd_Device_Save' onclick='Add_Device_Save();'>Save</button>
      <button id='btnEdit_Device_Save' onclick='Edit_Device_Save();'>Save</button>
      <button id='btnDevice_Cancel' onclick='Cancel_Device();'>Cancel</button>
    </div>
    <div id='divContainer_DeviceSources'> <span class='title'>Device Sources</span>
      <div id='divDeviceSources_DeviceName'></div>
      <br />
      <div id='divDeviceSources'></div>
      <br />
      <button id='btnDeviceSources_Close' onclick='Close_Device_Sources();'>Close</button>
    </div>
    <div id='divContainer_DeviceSourceFields'> <span class='title'>Device Source</span>
      <div id='divDeviceSourceFields'></div>
      <br />
      <button id='btnAdd_DeviceSource_Save' onclick='Add_Device_Source_Save();'>Save</button>
      <button id='btnEdit_DeviceSource_Save' onclick='Edit_Device_Source_Save();'>Save</button>
      <button id='btnDeviceSource_Cancel' onclick='Cancel_Device_Source();'>Cancel</button>
    </div>
    <div id='divContainer_DeviceActions'> <span class='title'>Device Actions</span>
      <div id='divDeviceActions_DeviceName'></div>
      <br />
      <div id='divDeviceActions'></div>
      <br />
      <button id='btnDeviceActions_Close' onclick='Close_Device_Actions();'>Close</button>
    </div>
    <div id='divContainer_DeviceActionFields'> <span class='title'>Device Action</span>
      <div id='divDeviceActionDropdowns'> Bus:
        <select id='selDeviceAction_Bus' style='display:block;'></select>
        <br /> Active:
        <select id='selDeviceAction_BusActive' style='display:block;'>
          <option value='on'>On</option>
          <option value='off'>Off</option>
        </select>
        <br /> Output Type:
        <select id='selDeviceAction_OutputType' style='display:block;'></select>
        <br /> </div>
      <div id='divDeviceActionFields'></div>
      <br />
      <button id='btnAdd_DeviceAction_Save' onclick='Add_Device_Action_Save();'>Save</button>
      <button id='btnEdit_DeviceAction_Save' onclick='Edit_Device_Action_Save();'>Save</button>
      <button id='btnDeviceAction_Cancel' onclick='Cancel_Device_Action();'>Cancel</button>
    </div>
    <div id='divContainer_Listeners'> <span class='title'>Connected Listeners:</span>
      <div id='divListeners'></div>
    </div>
    <div id='divContainer_TSLClients'> <span class='title'>TSL Clients</span>
      <div id='divTSLClients'></div>
      <br />
      <br />
      <button id='btnAdd_TSL_Client' onclick='Add_TSL_Client();'>Add</button>
    </div>
    <div id='divContainer_TSLClientFields'> <span class='title'>TSL Client</span>
      <div id='divTSLClientFields'></div>
      <br />
      <button id='btnAdd_TSL_Client_Save' onclick='Add_TSL_Client_Save();'>Save</button>
      <button id='btnEdit_TSL_Client_Save' onclick='Edit_TSL_Client_Save();'>Save</button>
      <button id='btnTSL_Client_Cancel' onclick='Cancel_TSL_Client();'>Cancel</button>
    </div>
    <div id='divContainer_CloudSettings'>
      <div id='divContainer_CloudDestinations'> <span class='title'><img src='lib/img/cloud.png' width='30' style='padding:3px;' />Cloud Destinations</span>
        <div id='divCloudDestinations'></div>
        <br />
        <br />
        <button id='btnAdd_Cloud_Destination' onclick='Add_Cloud_Destination();'>Add</button>
      </div>
      <div id='divContainer_CloudDestinationFields'> <span class='title'>Cloud Destination</span>
        <div id='divCloudDestinationFields'></div>
        <br />
        <button id='btnAdd_Cloud_Destination_Save' onclick='Add_Cloud_Destination_Save();'>Save</button>
        <button id='btnEdit_Cloud_Destination_Save' onclick='Edit_Cloud_Destination_Save();'>Save</button>
        <button id='btnCloud_Destination_Cancel' onclick='Cancel_Cloud_Destination();'>Cancel</button>
      </div>
      <div id='divContainer_CloudKeys'> <span class='title'><img src='lib/img/cloud.png' width='30' style='padding:3px;' />Cloud Keys</span>
        <div id='divCloudKeys'></div>
        <br />
        <br />
        <button id='btnAdd_Cloud_Key' onclick='Add_Cloud_Key();'>Add</button>
      </div>
      <div id='divContainer_CloudKeyFields'> <span class='title'>Cloud Key</span>
        <div id='divCloudKeyFields'></div>
        <br />
        <button id='btnAdd_Cloud_Key_Save' onclick='Add_Cloud_Key_Save();'>Save</button>
        <button id='btnCloud_Key_Cancel' onclick='Cancel_Cloud_Key();'>Cancel</button>
      </div>
      <div id='divContainer_CloudClients'> <span class='title'><img src='lib/img/cloud.png' width='30' style='padding:3px;' />Cloud Clients</span>
        <div id='divCloudClients'></div>
      </div>
    </div>
    <div id='divContainer_Logs'> <span class='title'>Logs</span>
      <div id='divLogs'></div>
    </div>
    <div id='divContainer_TallyData'> <span class='title'>Tally Data</span>
      <div id='divTallyData'></div>
    </div>
  </div>
</div>
<script src="lib/js/jquery-3.5.1.min.js"></script>
<script src="lib/js/bootstrap.min.js"></script>
<script src='/socket.io/socket.io.js'></script>
<script src='lib/js/nosleep.min.js'></script>
<script src="lib/js/admin.js"></script>
</body>

</html>